# Стандарт безопасности

**Версия:** 1.0  
**Приоритет:** Критичный  
**Источник:** Глава 23. Механизм криптографии, стандарты 1С:ИТС

---

## Правило: Использовать ValueStorage для защищённого хранилища

**Проблема:** Тип `Строка` не подходит для защищённого хранения паролей и ключей.

```bsl
// ❌ НЕПРАВИЛЬНО: Использование Строка для паролей
Реквизит.Пароль = "секретный_пароль"; // ОШИБКА: небезопасно

// ✅ ПРАВИЛЬНО: Использование ValueStorage
Реквизит.Пароль = Новый ЗначениеХранилища("секретный_пароль");
```

**Источник:** Стандарт #std740 (1С:ИТС), эталонная реализация БСП

---

## Правило: Использовать привилегированный режим для криптографических операций

**Проблема:** Криптографические операции требуют повышенных прав доступа.

```bsl
// ❌ НЕПРАВИЛЬНО: Обычный режим
Функция ПодписатьДанные(Данные) Экспорт
    Возврат КриптоПровайдер.Подписать(Данные); // ОШИБКА: недостаточно прав
КонецФункции

// ✅ ПРАВИЛЬНО: Привилегированный режим
Функция ПодписатьДанные(Данные) Экспорт
    Возврат ВыполнитьВПривилегированномРежиме("ПодписатьДанныеВнутр", Данные);
КонецФункции

Функция ПодписатьДанныеВнутр(Данные)
    Возврат КриптоПровайдер.Подписать(Данные);
КонецФункции
```

---

## Правило: Правильная работа с ДвоичныеДанные

**Проблема:** Конструктор `ДвоичныеДанные("")` может работать некорректно.

```bsl
// ❌ НЕПРАВИЛЬНО: Конструктор ДвоичныеДанные("")
Данные = Новый ДвоичныеДанные(""); // ОШИБКА: может работать некорректно

// ✅ ПРАВИЛЬНО: Использование ПолучитьДвоичныеДанныеИзСтроки
Данные = ПолучитьДвоичныеДанныеИзСтроки("", КодировкаТекста.UTF8);
```

---

## Чек-лист проверки

- [ ] Пароли и ключи хранятся в ValueStorage
- [ ] Криптографические операции выполняются в привилегированном режиме
- [ ] Используется `ПолучитьДвоичныеДанныеИзСтроки()` вместо конструктора
- [ ] Нет хранения паролей в открытом виде

---

**Ссылка на документацию:** Глава 23. Механизм криптографии

