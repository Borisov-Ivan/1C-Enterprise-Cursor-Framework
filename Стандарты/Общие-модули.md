# Стандарт создания общих модулей

**Версия:** 1.0  
**Приоритет:** Критичный  
**Источник:** Раздел "Правила создания общих модулей" (строки 446-540)

---

## Описание

Общие модули создаются для реализации процедур и функций, объединенных по некоторому признаку. Как правило, в один общий модуль помещаются процедуры и функции одной подсистемы конфигурации (продажи, закупки) или процедуры и функции сходного функционального назначения (работа со строками, общего назначения).

---

## Правила

### Правило 1: Выбор контекста выполнения кода

**Критично:** При разработке общих модулей следует выбирать один из четырех контекстов выполнения кода:

| Тип общего модуля | Пример наименования | Вызов сервера | Сервер | Внешнее соединение | Клиент (обычное приложение) | Клиент (управляемое приложение) |
|-------------------|---------------------|---------------|--------|-------------------|----------------------------|--------------------------------|
| 1. Серверный | ОбщегоНазначения (или ОбщегоНазначенияСервер) | | + | + | + | |
| 2. Серверный для вызова с клиента | ОбщегоНазначенияВызовСервера | + | + | | | |
| 3. Клиентский | ОбщегоНазначенияКлиент (или ОбщегоНазначенияГлобальный) | | | | + | + |
| 4. Клиент-серверный | ОбщегоНазначенияКлиентСервер | | + | + | + | + |

**Источник:** Раздел "Правила создания общих модулей", пункт 1.2

---

### Правило 2: Серверные общие модули

**Критично:** Серверные общие модули предназначены для размещения серверных процедур и функций, не доступных для использования из клиентского кода. В них реализуется вся внутренняя серверная бизнес-логика приложения.

**Признаки серверного модуля:**
- Сервер (флажок "Вызов сервера" сброшен)
- Клиент (обычное приложение)
- Внешнее соединение

**Именование:** По общим правилам именования объектов метаданных. В отдельных случаях для предотвращения конфликта имен со свойствами глобального контекста может быть добавлен постфикс «Сервер».

```bsl
// Примеры именования серверных модулей:
ОбщегоНазначения
РаботаСФайлами
РегламентныеЗаданияСервер // с постфиксом для предотвращения конфликта
```

**Источник:** Раздел "Правила создания общих модулей", пункт 2.1

---

### Правило 3: Серверные общие модули для вызова с клиента

**Критично:** Серверные общие модули для вызова с клиента содержат серверные процедуры и функции, доступные для использования из клиентского кода. Они составляют клиентский программный интерфейс сервера приложения.

**Признаки модуля для вызова с клиента:**
- Сервер (флажок "Вызов сервера" установлен)

**Именование:** По общим правилам именования объектов метаданных с постфиксом «ВызовСервера».

```bsl
// Примеры именования модулей для вызова с клиента:
РаботаСФайламиВызовСервера
ОбщегоНазначенияВызовСервера
```

**Важно:** Экспортные процедуры и функции в таких общих модулях не должны содержать параметров мутабельных типов (`СправочникОбъект`, `ДокументОбъект` и т.п.), так как их передача из (или в) клиентского кода невозможна.

**Источник:** Раздел "Правила создания общих модулей", пункт 2.2

---

### Правило 4: Клиентские общие модули

**Критично:** Клиентские общие модули содержат клиентскую бизнес-логику (функциональность, определенную только для клиента).

**Признаки клиентского модуля:**
- Клиент (управляемое приложение)
- Клиент (обычное приложение)

**Именование:** С постфиксом «Клиент».

```bsl
// Примеры именования клиентских модулей:
РаботаСФайламиКлиент
ОбщегоНазначенияКлиент
```

**Источник:** Раздел "Правила создания общих модулей", пункт 2.3

---

### Правило 5: Клиент-серверные общие модули

**Критично:** В отдельных случаях допустимо создание клиент-серверных общих модулей с процедурами и функциями, содержание которых одинаково и на сервере, и на клиенте.

**Признаки клиент-серверного модуля:**
- Клиент (управляемое приложение)
- Сервер (флажок "Вызов сервера" сброшен)
- Клиент (обычное приложение)
- Внешнее соединение

**Именование:** С постфиксом «КлиентСервер».

```bsl
// Примеры именования клиент-серверных модулей:
РаботаСФайламиКлиентСервер
ОбщегоНазначенияКлиентСервер
```

**Рекомендация:** В общем случае не рекомендуется определять общие модули одновременно для сервера и для клиента (управляемое приложение). Функциональность, определенную для клиента и для сервера, рекомендуется реализовывать в разных общих модулях.

**Источник:** Раздел "Правила создания общих модулей", пункт 2.4

---

### Правило 6: Именование общих модулей

**Критично:** Имена общих модулей рекомендуется строить по общим правилам именования объектов метаданных. Название общего модуля должно совпадать с названием подсистемы или отдельного механизма, процедуры и функции которой он реализует.

**Рекомендации:**
- Избегать в названиях общих модулей таких общих слов как "Процедуры", "Функции", "Обработчики", "Модуль", "Функциональность" и т.п.
- Применять такие слова только в исключительных случаях, когда они более полно раскрывают назначение модуля

**Источник:** Раздел "Правила создания общих модулей", пункт 3.1

---

### Правило 7: Дополнительные постфиксы

**Критично:** Дополнительно к общим модулям могут быть добавлены уточняющие постфиксы:

1. **Постфикс «Глобальный»** — для глобальных модулей (в этом случае постфикс «Клиент» добавлять не следует)
   - Пример: `РаботаСФайламиГлобальный`

2. **Постфикс «ПолныеПрава»** — для модулей, выполняющихся в привилегированном режиме
   - Пример: `РаботаСФайламиПолныеПрава`

3. **Постфикс «ПовтИсп»** и **«КлиентПовтИсп»** — для модулей с повторным использованием возвращаемых значений
   - Пример: `РаботаСФайламиКлиентПовтИсп`

4. **Постфикс «Переопределяемый»** и **«КлиентПереопределяемый»** — для библиотечных модулей с процедурами и функциями, допускающими изменение своей реализации
   - Пример: `РаботаСФайламиКлиентПереопределяемый`

**Источник:** Раздел "Правила создания общих модулей", пункт 3.2

---

## Чек-лист проверки

- [ ] Выбран правильный контекст выполнения кода (серверный, клиентский, клиент-серверный)
- [ ] Серверные модули имеют правильные признаки (Сервер, Клиент (обычное приложение), Внешнее соединение)
- [ ] Модули для вызова с клиента имеют признак "Вызов сервера" и постфикс "ВызовСервера"
- [ ] Клиентские модули имеют постфикс "Клиент"
- [ ] Клиент-серверные модули имеют постфикс "КлиентСервер" (используются только в исключительных случаях)
- [ ] Имена модулей соответствуют общим правилам именования объектов метаданных
- [ ] Избегаются общие слова в названиях модулей ("Процедуры", "Функции" и т.п.)
- [ ] Используются дополнительные постфиксы при необходимости (Глобальный, ПолныеПрава, ПовтИсп, Переопределяемый)
- [ ] Экспортные процедуры и функции модулей для вызова с клиента не содержат параметров мутабельных типов

---

**Ссылка на исходный документ:** Раздел "Правила создания общих модулей" (строки 446-540)

