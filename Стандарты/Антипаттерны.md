# Антипаттерны разработки

**Версия:** 1.0  
**Приоритет:** Высокий  
**Источник:** Глава 8. Работа с запросами, Глава 9. Работа с данными

---

## 1. Запросы в циклах (N+1 проблема)

**Проблема:** Выполнение запросов внутри циклов приводит к множественным запросам вместо одного.

```bsl
// ❌ НЕПРАВИЛЬНО: N+1 проблема
Для Каждого Элемент Из Коллекция Цикл
    Запрос = Новый Запрос;
    Запрос.Текст = "ВЫБРАТЬ * ИЗ Справочник.Товары ГДЕ Ссылка = &Ссылка";
    Запрос.УстановитьПараметр("Ссылка", Элемент.Ссылка);
    Результат = Запрос.Выполнить();
КонецЦикла;

// ✅ ПРАВИЛЬНО: Один запрос для всех элементов
СписокСсылок = Новый Массив;
Для Каждого Элемент Из Коллекция Цикл
    СписокСсылок.Добавить(Элемент.Ссылка);
КонецЦикла;

Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ * ИЗ Справочник.Товары ГДЕ Ссылка В (&СписокСсылок)";
Запрос.УстановитьПараметр("СписокСсылок", СписокСсылок);
Результат = Запрос.Выполнить();
```

**Источник:** Глава 8. Работа с запросами

---

## 2. Отсутствие транзакций при записи

**Проблема:** Операции записи без транзакций могут привести к несогласованности данных.

```bsl
// ❌ НЕПРАВИЛЬНО: Нет транзакции
НовыйОбъект.Записать();

// ✅ ПРАВИЛЬНО: Использование транзакции
НачатьТранзакцию();
Попытка
    НовыйОбъект.Записать();
    ЗафиксироватьТранзакцию();
Исключение
    ОтменитьТранзакцию();
    ВызватьИсключение;
КонецПопытки;
```

**Источник:** Глава 9. Работа с данными

---

## 3. Отсутствие обработки исключений

**Проблема:** Необработанные исключения могут привести к падению приложения.

```bsl
// ❌ НЕПРАВИЛЬНО: Нет обработки исключений
Функция ПолучитьДанные() Экспорт
    Возврат Запрос.Выполнить();
КонецФункции

// ✅ ПРАВИЛЬНО: Обработка исключений
Функция ПолучитьДанные() Экспорт
    Попытка
        Возврат Запрос.Выполнить();
    Исключение
        ТекстОшибки = ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
        ЗаписьЖурналаРегистрации("Ошибка", УровеньЖурналаРегистрации.Ошибка,,, ТекстОшибки);
        ВызватьИсключение;
    КонецПопытки;
КонецФункции
```

**Источник:** Глава 4. Встроенный язык

---

## Чек-лист проверки

- [ ] Нет запросов внутри циклов
- [ ] Все операции записи выполняются в транзакциях
- [ ] Все экспортные функции имеют обработку исключений
- [ ] Нет дублирования кода

---

**Ссылка на документацию:** Глава 8. Работа с запросами, Глава 9. Работа с данными

